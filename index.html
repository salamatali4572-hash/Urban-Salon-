<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Salon Manager</title>
<style>
body{margin:0;font-family:sans-serif;background:#0b1220;color:#e5e7eb;}
header{display:flex;align-items:center;gap:10px;padding:10px 16px;background:#111;}
header h1{margin:0;font-size:18px;font-weight:700}
.pill{margin-left:auto;padding:4px 10px;background:#7c3aed;border-radius:999px;font-size:12px}
.app{max-width:700px;margin:30px auto;padding:16px}
.card{background:#1e293b;padding:20px;border-radius:14px}
.tabs{display:flex;gap:10px;margin-bottom:16px;flex-wrap:wrap}
.tab{flex:1;padding:10px;border-radius:8px;text-align:center;cursor:pointer;background:#334155}
.tab.active{background:#7c3aed;color:#fff}
.hidden{display:none}
label{font-size:12px;display:block;margin:6px 0}
input{width:100%;padding:10px;border-radius:8px;border:1px solid #334155;background:#0f172a;color:#fff}
button{margin-top:8px;padding:8px 12px;border:none;border-radius:8px;background:#7c3aed;color:#fff;font-weight:700;cursor:pointer}
ul{margin-top:10px;padding-left:18px}
img{border-radius:6px}
.offer-item{display:flex;align-items:center;gap:10px;margin-bottom:15px;padding:10px;background:#2d3748;border-radius:8px;}
.offer-photo{width:60px;height:60px;object-fit:cover;border-radius:8px;}
.offer-info{flex:1;}
.offer-actions{display:flex;gap:5px;}
.btn-whatsapp{background:#25D366;color:white;}
.photo-preview{width:100px;height:100px;object-fit:cover;border-radius:8px;margin:10px 0;}
.customer-checkbox{margin-right:8px;}
.customer-selector{max-height:200px;overflow-y:auto;margin:10px 0;padding:10px;background:#2d3748;border-radius:8px;}
.bill-item{margin-bottom:15px;padding:10px;background:#2d3748;border-radius:8px;}
</style>
</head>
<body>
<header>
<div>üíà</div>
<h1>Salon Manager By Salamat Ali</h1>
<div class="pill" id="statusPill">Closed</div>
</header>
<div class="app">
<section id="auth" class="card">
<div class="tabs">
<div class="tab active" data-auth="login">Login</div>
<div class="tab" data-auth="register">Register</div>
<div class="tab" data-auth="forgot">Forgot</div>
</div>
<div id="loginPane">
<label>Username</label><input id="loginUser" type="text" />
<label>Password</label><input id="loginPass" type="password" />
<button id="btnLogin">Login</button>
</div>
<div id="registerPane" class="hidden">
<label>Username</label><input id="regUser" type="text" />
<label>Password</label><input id="regPass" type="password" />
<label>Owner PIN</label><input id="regPin" type="password" maxlength="6" />
<button id="btnRegister">Create Account</button>
</div>
<div id="forgotPane" class="hidden">
<label>Username</label><input id="forgotUser" type="text" />
<label>Owner PIN</label><input id="forgotPin" type="password" maxlength="6" />
<button id="btnForgot">Recover Account</button>
</div>
</section>
<section id="dashboard" class="card hidden">
<div class="tabs" id="mainTabs"></div>
<div id="tabContent"></div>
<button id="btnLogout">Logout</button>
</section>
</div>
<script>
const $=(s,el=document)=>el.querySelector(s);
const $$=(s,el=document)=>Array.from(el.querySelectorAll(s));
function getUsersObj(){return JSON.parse(localStorage.getItem("salonUsers")||"{}");}
function saveUsersObj(users){localStorage.setItem("salonUsers",JSON.stringify(users));}
function getCurrentUser(){return localStorage.getItem("currentUser");}
function setCurrentUser(u){localStorage.setItem("currentUser",u);}
$$('.tab[data-auth]').forEach(tab=>{tab.addEventListener('click',()=>{$$('.tab[data-auth]').forEach(t=>t.classList.remove('active'));tab.classList.add('active');$('#loginPane').classList.toggle('hidden',tab.dataset.auth!=='login');$('#registerPane').classList.toggle('hidden',tab.dataset.auth!=='register');$('#forgotPane').classList.toggle('hidden',tab.dataset.auth!=='forgot');});});
$('#btnRegister').addEventListener('click',()=>{const u=$('#regUser').value.trim();const p=$('#regPass').value;const pin=$('#regPin').value.trim();if(!u||!p||!pin){alert("Fill all fields");return;}let users=getUsersObj();if(users[u]){alert("Username already exists");return;}users[u]={password:p,pin:pin,data:{apts:[],prods:[],bills:[],history:[],totalSale:0,offers:[]}};saveUsersObj(users);alert("Account created! Now login.");$('#regUser').value=$('#regPass').value=$('#regPin').value="";document.querySelector('[data-auth="login"]').click();});
$('#btnLogin').addEventListener('click',()=>{const u=$('#loginUser').value.trim();const p=$('#loginPass').value;let users=getUsersObj();if(users[u]&&users[u].password===p){setCurrentUser(u);startDashboard();}else{alert("Invalid login");}});
$('#btnForgot').addEventListener('click',()=>{const u=$('#forgotUser').value.trim();const pin=$('#forgotPin').value.trim();let users=getUsersObj();if(users[u]&&users[u].pin===pin){alert("Your password is: "+users[u].password);}else{alert("Wrong details");}});
$('#btnLogout').addEventListener('click',()=>{$('#dashboard').classList.add("hidden");$('#auth').classList.remove("hidden");$('#statusPill').textContent="Closed";setCurrentUser("");});
const tabs=[{id:"appointments",label:"Appointments"},{id:"billing",label:"Billing"},{id:"products",label:"Products & Services"},{id:"offers",label:"Offers"},{id:"sales",label:"Sales"},{id:"history",label:"History"},{id:"support",label:"Support"}];
function startDashboard(){$('#auth').classList.add("hidden");$('#dashboard').classList.remove("hidden");$('#statusPill').textContent="Open";initTabs();}
function initTabs(){const bar=$("#mainTabs");bar.innerHTML="";tabs.forEach(t=>{const b=document.createElement("div");b.className="tab";b.textContent=t.label;b.onclick=()=>openTab(t.id);bar.appendChild(b);});openTab("appointments");}
function openTab(id){$$("#mainTabs .tab").forEach(b=>b.classList.remove("active"));const idx=tabs.findIndex(t=>t.id===id);$$("#mainTabs .tab")[idx].classList.add("active");const box=$("#tabContent");box.innerHTML="";switch(id){case"appointments":renderAppointments(box);break;case"billing":renderBilling(box);break;case"products":renderProducts(box);break;case"offers":renderOffers(box);break;case"sales":renderSales(box);break;case"history":renderHistory(box);break;case"support":renderSupport(box);break;}}
function getUserData(){let users=getUsersObj();return users[getCurrentUser()].data;}
function saveUserData(data){let users=getUsersObj();users[getCurrentUser()].data=data;saveUsersObj(users);}
function renderAppointments(el){let data=getUserData();if(!data.apts)data.apts=[];el.innerHTML=`<h3>Book Appointment</h3><label>Name</label><input id="aptName" type="text"><label>Service</label><input id="aptService" type="text"><label>Date & Time</label><input id="aptTime" type="datetime-local"><button id="saveApt">Save</button><ul id="aptList"></ul>`;$("#saveApt").onclick=()=>{const name=$("#aptName").value.trim();const service=$("#aptService").value.trim();const time=$("#aptTime").value;if(!name||!service||!time){alert("Please fill all fields");return;}data.apts.push({name,service,time});saveUserData(data);openTab("appointments");};$("#aptList").innerHTML=data.apts.length>0?data.apts.map(a=>`<li>${a.name} - ${a.service} at ${a.time}</li>`).join(""):"<li>No appointments booked yet</li>";}
function renderBilling(el){let data=getUserData();if(!data.prods)data.prods=[];if(!data.bills)data.bills=[];el.innerHTML=`<h3>Walk-in Billing</h3><label>Customer Name</label><input id="billName" type="text"><label>Phone (WhatsApp)</label><input id="billPhone" type="text"><h4>Select Products/Services</h4><div id="billProducts">${data.prods.length>0?data.prods.map((p,i)=>`<div><input type="checkbox" class="billProd" data-index="${i}" data-price="${p.price}" data-name="${p.name}">${p.name} - $${p.price}</div>`).join(""):"<p>No products/services added yet. Add them in the Products tab.</p>"}</div><p><b>Total: $<span id="billTotal">0</span></b></p><button id="saveBill" ${data.prods.length===0?'disabled':''}>Save Bill</button><h3>Recent Bills</h3><div id="billList"></div>`;function updateTotal(){let total=0;$$(".billProd:checked").forEach(c=>total+=+c.dataset.price);$("#billTotal").textContent=total;}$$(".billProd").forEach(c=>c.addEventListener("change",updateTotal));$("#saveBill").onclick=()=>{let selected=[];let total=0;$$(".billProd:checked").forEach(c=>{selected.push({name:c.dataset.name,price:+c.dataset.price});total+=+c.dataset.price;});if(!selected.length){alert("Select at least one item");return;}const name=$("#billName").value.trim();const phone=$("#billPhone").value.trim();if(!name){alert("Please enter customer name");return;}let bill={name:name,phone:phone,items:selected,amt:total,time:new Date().toLocaleString()};data.bills.push(bill);data.totalSale=(data.totalSale||0)+bill.amt;saveUserData(data);openTab("billing");};$("#billList").innerHTML=data.bills.length>0?data.bills.map((b,i)=>`<div class="bill-item"><b>${b.name}</b> - $${b.amt}<br><small>${b.time}</small><br><button onclick="printReceipt(${i})">üñ® Print</button><button onclick="sendWhatsApp(${i})">üì≤ WhatsApp</button></div>`).join(""):"<p>No bills created yet</p>";}
window.printReceipt=(index)=>{let data=getUserData();let b=data.bills[index];let itemsHtml=b.items.map(it=>`<li>${it.name} - $${it.price}</li>`).join("");let w=window.open("","","width=400,height=600");w.document.write(`<h2>Salon Receipt</h2><p><b>Customer:</b> ${b.name}</p><ul>${itemsHtml}</ul><p><b>Total:</b> $${b.amt}</p><p><b>Date:</b> ${b.time}</p><hr><p>Thank you for visiting!</p>`);w.print();w.close();};
window.sendWhatsApp=(index)=>{let data=getUserData();let b=data.bills[index];if(!b.phone){alert("No phone number saved");return;}let itemsText=b.items.map(it=>`${it.name} - $${it.price}`).join("%0a");let msg=`Hello ${b.name},%0aYour bill:%0a${itemsText}%0aTotal: $${b.amt}%0aDate: ${b.time}%0aThank you for visiting our salon!`;let url=`https://wa.me/${b.phone}?text=${msg}`;window.open(url,"_blank");};
function renderProducts(el){let data=getUserData();if(!data.prods)data.prods=[];el.innerHTML=`<h3>Products & Services</h3><label>Name</label><input id="prodName" type="text"><label>Price</label><input id="prodPrice" type="number"><label>Photo URL (optional)</label><input id="prodPhoto" type="text"><label>Or Upload Photo</label><input id="prodFile" type="file" accept="image/*"><button id="saveProd">Save Product</button><div id="prodList"></div>`;let editingIndex=null;$("#saveProd").onclick=()=>{let file=$("#prodFile").files[0];let name=$("#prodName").value.trim();let price=+$("#prodPrice").value;let url=$("#prodPhoto").value.trim();if(!name||!price){alert("Please enter name and price");return;}function saveData(photo){if(editingIndex!==null){data.prods[editingIndex]={name,price,photo};editingIndex=null;}else{data.prods.push({name,price,photo});}saveUserData(data);openTab("products");}if(file){let reader=new FileReader();reader.onload=e=>saveData(e.target.result);reader.readAsDataURL(file);}else{saveData(url||"");}};$("#prodList").innerHTML=data.prods.length>0?data.prods.map((p,i)=>`<div style="margin:6px 0;padding:6px;border:1px solid #333;border-radius:6px;display:flex;align-items:center;gap:10px;">${p.photo?`<img src="${p.photo}" width="50" height="50">`:""}<div style="flex:1">${p.name} - $${p.price}</div><button onclick="editProduct(${i})">‚úèÔ∏è Edit</button><button onclick="deleteProduct(${i})">‚ùå Delete</button></div>`).join(""):"<p>No products/services added yet</p>";window.editProduct=(i)=>{let p=data.prods[i];$("#prodName").value=p.name;$("#prodPrice").value=p.price;$("#prodPhoto").value=p.photo.startsWith("data:")?"":p.photo;$("#prodFile").value="";editingIndex=i;};window.deleteProduct=(i)=>{data.prods.splice(i,1);saveUserData(data);openTab("products");};}
function renderOffers(el){let data=getUserData();if(!data.offers)data.offers=[];if(!data.bills)data.bills=[];const customers=[];const customerMap={};if(data.bills.length>0){data.bills.forEach(bill=>{if(bill.name&&bill.phone&&!customerMap[bill.phone]){customerMap[bill.phone]=true;customers.push({name:bill.name,phone:bill.phone});}});}el.innerHTML=`<h3>Create Special Offers</h3><label>Offer Title</label><input id="offerTitle" type="text"><label>Description</label><input id="offerDesc" type="text"><label>Price</label><input id="offerPrice" type="number"><label>Upload Offer Photo</label><input id="offerPhoto" type="file" accept="image/*"><img id="offerPreview" class="photo-preview hidden" src="#" alt="Preview"><button id="saveOffer">Save Offer</button><h3>Send Offers to Customers</h3><div class="customer-selector" id="customerSelector">${customers.length>0?customers.map((c,i)=>`<div><input type="checkbox" class="customer-checkbox" data-phone="${c.phone}" data-name="${c.name}">${c.name} (${c.phone})</div>`).join(""):"<p>No customers found. Create bills first to save customers.</p>"}</div><button id="sendOffers" ${customers.length===0?'disabled':''}>Send Selected Offers via WhatsApp</button><h3>Saved Offers</h3><div id="offerList"></div>`;$("#offerPhoto").addEventListener("change",function(e){const file=e.target.files[0];if(file){const reader=new FileReader();reader.onload=function(event){$("#offerPreview").src=event.target.result;$("#offerPreview").classList.remove("hidden");};reader.readAsDataURL(file);}});$("#saveOffer").onclick=()=>{const title=$("#offerTitle").value.trim();const desc=$("#offerDesc").value.trim();const price=$("#offerPrice").value;const file=$("#offerPhoto").files[0];if(!title||!price){alert("Please enter at least a title and price");return;}if(file){const reader=new FileReader();reader.onload=function(e){data.offers.push({title:title,desc:desc,price:price,photo:e.target.result});saveUserData(data);openTab("offers");};reader.readAsDataURL(file);}else{data.offers.push({title:title,desc:desc,price:price,photo:""});saveUserData(data);openTab("offers");}};$("#sendOffers").onclick=()=>{const selectedCustomers=$$(".customer-checkbox:checked");if(selectedCustomers.length===0){alert("Please select at least one customer");return;}if(data.offers.length===0){alert("No offers available. Create an offer first.");return;}const offer=data.offers[data.offers.length-1];selectedCustomers.forEach(customer=>{const phone=customer.dataset.phone;const name=customer.dataset.name;if(!phone){alert(`No phone number for ${name}`);return;}let message=`Hello ${name}!%0A%0AWe have a special offer for you:%0A%0A*${offer.title}*%0A`;if(offer.desc)message+=`${offer.desc}%0A`;message+=`Price: $${offer.price}%0A%0AVisit our salon to avail this offer!%0A%0AThank you,%0ASalon Team`;const url=`https://wa.me/${phone}?text=${encodeURIComponent(message)}`;window.open(url,"_blank");});alert(`Offer sent to ${selectedCustomers.length} customer(s)`);};$("#offerList").innerHTML=data.offers.length>0?data.offers.map((o,i)=>`<div class="offer-item">${o.photo?`<img src="${o.photo}" class="offer-photo" alt="${o.title}">`:`<div class="offer-photo" style="background:#7c3aed;display:flex;align-items:center;justify-content:center;color:white;font-size:12px;">No Image</div>`}<div class="offer-info"><strong>${o.title}</strong><br><small>${o.desc||"No description"}</small><br><small>Price: $${o.price}</small></div><div class="offer-actions"><button class="btn-whatsapp" onclick="sendOfferToAll(${i})">Send to All</button></div></div>`).join(""):"<p>No offers created yet</p>";}
window.sendOfferToAll=function(offerIndex){let data=getUserData();const offer=data.offers[offerIndex];const customers=[];const customerMap={};if(data.bills&&data.bills.length>0){data.bills.forEach(bill=>{if(bill.name&&bill.phone&&!customerMap[bill.phone]){customerMap[bill.phone]=true;customers.push({name:bill.name,phone:bill.phone});}});}if(customers.length===0){alert("No customers available");return;}customers.forEach(customer=>{if(customer.phone){let message=`Hello ${customer.name}!%0A%0AWe have a special offer for you:%0A%0A*${offer.title}*%0A`;if(offer.desc)message+=`${offer.desc}%0A`;message+=`Price: $${offer.price}%0A%0AVisit our salon to avail this offer!%0A%0AThank you,%0ASalon Team`;const url=`https://wa.me/${customer.phone}?text=${encodeURIComponent(message)}`;window.open(url,"_blank");}});alert(`Offer sent to all ${customers.length} customers`);};
function renderSales(el){let data=getUserData();let total=data.totalSale||0;el.innerHTML=`<h3>Today's Sales</h3><p>Total: $${total}</p><button id="closeDay">Close Day</button>`;$("#closeDay").onclick=()=>{if(!data.history)data.history=[];data.history.push({date:new Date().toLocaleString(),total:total});data.totalSale=0;data.bills=[];saveUserData(data);alert("Day closed. Data saved to history.");openTab("sales");};}
function renderHistory(el){let data=getUserData();if(!data.history)data.history=[];el.innerHTML=`<h3>Sales History</h3><ul>${data.history.map(h=>`<li>${h.date}: $${h.total}</li>`).join("")}</ul><label>Password to delete history</label><input id="histPass" type="password"><button id="delHist">Delete History</button>`;$("#delHist").onclick=()=>{let users=getUsersObj();let user=users[getCurrentUser()];if($("#histPass").value===user.pin){data.history=[];saveUserData(data);openTab("history");}else{alert("Wrong PIN");}};}
function renderSupport(el){el.innerHTML=`<h3>Customer Support</h3><p>Need help? Contact us on WhatsApp:</p><button id="btnSupport">üì≤ Chat on WhatsApp</button>`;$("#btnSupport").onclick=()=>{window.open("https://wa.me/923160045195","_blank");};}
</script>
</body>
</html>
